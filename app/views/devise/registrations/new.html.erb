<div class="section devise-section">
  <div class="container-medium">
  
    <div class="position-relative">

      <%= image_tag "red_splash.png", id: "red-splash" %>

      <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "turnstile" },  data: { turbo: :false }) do |f| %>
        <div class="devise-form">

          <h2 class="text-center my-4">Créer mon compte</h2>

          <%= f.error_notification %>

          <%= f.input :first_name,
                      placeholder: "Prénom",
                      required: true,
                      label: false,
                      autofocus: true,
                      input_html: { autocomplete: "given-name" }, 
                      wrapper_html: {class: "mb-4"} %>

          <%= f.input :last_name,
                      placeholder: "Nom",
                      required: true,
                      label: false,
                      autofocus: true,
                      input_html: { autocomplete: "family-name" }, wrapper_html: {class: "mb-4"} %>

          <%= f.input :email,
                      placeholder: "Email",
                      required: true,
                      label: false,
                      autofocus: true,
                      input_html: { autocomplete: "email" }, 
                      wrapper_html: {class: "mb-4"} %>
                      
          <div class="position-relative" data-controller="toggle-password-visibility">
            <%= f.input :password,
                        placeholder: "Mot de passe",
                        required: true,
                        label: false,
                        input_html: { autocomplete: "new-password", id:"user-password" } %>
            <div class="password-visibility-button"><i class="far fa-eye-slash"></i></div>
          </div>

          <div class="cf-turnstile my-3"
            data-sitekey="<%= ENV['TURNSTILE_SITE_KEY'] %>"
            data-callback="turnstileSuccess">
          </div>

          <div class="d-flex justify-content-center">
            <%= f.submit "M'inscrire", class:"btn-egg my-4"%>
          </div>

          

          <small class="d-flex justify-content-center">Déjà un compte ?<%= link_to "Me connecter", new_session_path(resource_name), class:"ms-2" %><br></small>
          

        </div>
        
      <% end %>
    </div>
    
  </div>
</div>
