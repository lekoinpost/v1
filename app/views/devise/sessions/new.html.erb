<div class="section devise-section">
  <div class="container-medium">
    
    <div class="position-relative">

      <%= image_tag "red_splash.png", id: "red-splash" %>

      <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name), data: { turbo: :false }, html: { class: "turnstile" }) do |f| %>
        <div class="devise-form">
          
          <h2 class="text-center my-5">Connexion</h2>
          
          <%= f.error_notification %>

          <%= f.input :email,
                      placeholder: "Email",
                      required: true,
                      label: false,
                      autofocus: true,
                      input_html: { autocomplete: "email" }, 
                      wrapper_html: {class: "mb-4"} %>
          
          <div class="position-relative" data-controller="toggle-password-visibility">
            <%= f.input :password,
                        placeholder: "Mot de passe",
                        required: true,
                        label: false,
                        input_html: { autocomplete: "current-password", id:"user-password" } %>
            <div class="password-visibility-button"><i class="far fa-eye-slash"></i></div>
          </div>
          <div class="mt-2 ms-2">
            <small><%= link_to "Mot de passe oubliÃ© ?", new_password_path(resource_name) %></small>
          </div>

          <div class="cf-turnstile my-3"
            data-sitekey="<%= ENV['TURNSTILE_SITE_KEY'] %>"
            data-callback="turnstileSuccess">
          </div>

          <div class="d-flex justify-content-center mt-3">
            <%= f.submit "Connexion", class:"btn-egg my-4", data: { turnstile_target: "submit" } %>
          </div>

          <small class="d-flex justify-content-center"><%= link_to " Pas encore inscrit ?", new_registration_path(resource_name), class:"ms-2" %></small>

        </div>
        
      <% end %>

    </div>
  </div>
</div>
